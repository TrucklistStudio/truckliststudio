# Key = Category
# TAGS:
# @CWIDTH : Capture Width
# @CHEIGHT: Capture Height
# @SEEK : Starting seek position
# @FILE: source input file
# @OWIDTH: Width of the output image
# @OHEIGHT: Height of the output image
# @RATE: Frame rate
# @VPORT: Port used for receiving video data
# @APORT: Port used for receiving audio data
# @VCODEC: Video codec (FME)
# @ACODEC: Audio codec (FME)
# @VBITRATE: Video bitrate (FME)
# @ABITRATE: Audio bitrate (FME);
# @KEYINT: Keyframe_frequency (FME);

#GStreamer back-end
# Theoraenc
#iceCast=gst-launch-0.10 tcpclientsrc port=@VPORT ! videoparse format=rgb width=@CWIDTH height=@CHEIGHT framerate=@RATE/1 ! queue max-size-buffers=0 max-size-time=0 ! ffmpegcolorspace ! videoscale ! videorate ! video/x-raw-rgb, framerate=@RATE/1, width=@CWIDTH, height=@CHEIGHT, depth=24, bpp=24, blue_mask=255, green_mask=65280, red_mask=16711680, byte-stream=true ! ffmpegcolorspace ! theoraenc quality=35 ! queue max-size-buffers=0 max-size-time=0 ! oggmux name=mux tcpclientsrc port=@APORT ! audio/x-raw-int,rate=@FREQ,channels=@CHANNELS,signed=true,width=16,depth=16,endianness=4321 ! queue max-size-buffers=0 max-size-time=0 ! audioconvert ! vorbisenc ! queue max-size-buffers=0 max-size-time=0 ! mux. mux. ! queue max-size-buffers=0 max-size-time=0 ! shout2send ip=@URL port=@PORT password=@PASSWORD mount=@MOUNT streamname=WSIceCast sync=false
#iceCastHQ=gst-launch-0.10 tcpclientsrc port=@VPORT ! videoparse format=rgb width=@CWIDTH height=@CHEIGHT framerate=@RATE/1 ! queue max-size-buffers=0 max-size-time=0 ! ffmpegcolorspace ! videoscale ! videorate ! video/x-raw-rgb, framerate=@RATE/1, width=@CWIDTH, height=@CHEIGHT, depth=24, bpp=24, blue_mask=255, green_mask=65280, red_mask=16711680, byte-stream=true ! ffmpegcolorspace ! theoraenc ! queue max-size-buffers=0 max-size-time=0 ! oggmux name=mux tcpclientsrc port=@APORT ! audio/x-raw-int,rate=@FREQ,channels=@CHANNELS,signed=true,width=16,depth=16,endianness=4321 ! queue max-size-buffers=0 max-size-time=0 ! audioconvert ! vorbisenc ! queue max-size-buffers=0 max-size-time=0 ! mux. mux. ! queue max-size-buffers=0 max-size-time=0 ! shout2send ip=@URL port=@PORT password=@PASSWORD mount=@MOUNT streamname=WSIceCastHQ sync=false
# VP8enc
#iceCast=gst-launch-0.10 -q tcpclientsrc port=@VPORT ! videoparse format=rgb width=@CWIDTH height=@CHEIGHT framerate=@RATE/1 ! queue max-size-buffers=0 max-size-time=0 ! ffmpegcolorspace ! videoscale ! videorate ! video/x-raw-rgb, framerate=@RATE/1, width=@CWIDTH, height=@CHEIGHT, depth=24, bpp=24, blue_mask=255, green_mask=65280, red_mask=16711680, byte-stream=true ! ffmpegcolorspace ! vp8enc mode=vbr max-latency=25 max-keyframe-distance=@KEYINT quality=5 speed=4 threads=4 ! queue max-size-buffers=0 max-size-time=0 ! webmmux streamable=true name=mux tcpclientsrc port=@APORT ! audio/x-raw-int,rate=@FREQ,channels=@CHANNELS,signed=true,width=16,depth=16,endianness=4321 ! queue max-size-buffers=0 max-size-time=0 ! audioconvert ! vorbisenc ! queue max-size-buffers=0 max-size-time=0 ! mux. mux. ! queue max-size-buffers=0 max-size-time=0 ! shout2send ip=@URL port=@PORT password=@PASSWORD mount=@MOUNT streamname=WSIceCast sync=false
#iceCastHQ=gst-launch-0.10 -q tcpclientsrc port=@VPORT ! videoparse format=rgb width=@CWIDTH height=@CHEIGHT framerate=@RATE/1 ! queue max-size-buffers=0 max-size-time=0 ! ffmpegcolorspace ! videoscale ! videorate ! video/x-raw-rgb, framerate=@RATE/1, width=@CWIDTH, height=@CHEIGHT, depth=24, bpp=24, blue_mask=255, green_mask=65280, red_mask=16711680, byte-stream=true ! ffmpegcolorspace ! vp8enc mode=vbr max-latency=25 max-keyframe-distance=@KEYINT sharpness=3 quality=8 speed=3 threads=4 ! queue max-size-buffers=0 max-size-time=0 ! webmmux streamable=true name=mux tcpclientsrc port=@APORT ! audio/x-raw-int,rate=@FREQ,channels=@CHANNELS,signed=true,width=16,depth=16,endianness=4321 ! queue max-size-buffers=0 max-size-time=0 ! audioconvert ! vorbisenc ! queue max-size-buffers=0 max-size-time=0 ! mux. mux. ! queue max-size-buffers=0 max-size-time=0 ! shout2send ip=@URL port=@PORT password=@PASSWORD mount=@MOUNT streamname=WSIceCastHQ sync=false

#GStreamer 1.0 back-end
# Theoraenc
#iceCast=gst-launch-1.0 tcpclientsrc port=@VPORT ! videoparse format=rgb width=@CWIDTH height=@CHEIGHT framerate=@RATE/1 ! queue max-size-buffers=0 max-size-time=0 ! videoconvert ! videoscale ! videorate ! video/x-raw, format=RGB, framerate=@RATE/1, width=@CWIDTH, height=@CHEIGHT ! videoconvert ! theoraenc quality=30 ! queue max-size-buffers=0 max-size-time=0 ! oggmux name=mux  tcpclientsrc port=@APORT ! audio/x-raw, format=S16BE, channels=@CHANNELS, rate=@FREQ ! queue max-size-buffers=0 max-size-time=0 ! audioconvert ! audioresample ! audiorate ! vorbisenc ! queue max-size-buffers=0 max-size-time=0 ! mux. mux. ! queue max-size-buffers=0 max-size-time=0 ! shout2send ip=@URL port=@PORT mount=@MOUNT password=@PASSWORD streamname=WSIceCast sync=false
#iceCastHQ=gst-launch-1.0 tcpclientsrc port=@VPORT ! videoparse format=rgb width=@CWIDTH height=@CHEIGHT framerate=@RATE/1 ! queue max-size-buffers=0 max-size-time=0 ! videoconvert ! videoscale ! videorate ! video/x-raw, format=RGB, framerate=@RATE/1, width=@CWIDTH, height=@CHEIGHT ! videoconvert ! theoraenc ! queue max-size-buffers=0 max-size-time=0 ! oggmux name=mux tcpclientsrc port=@APORT ! audio/x-raw, format=S16BE, channels=@CHANNELS, rate=@FREQ ! queue max-size-buffers=0 max-size-time=0 ! audioconvert ! audioresample ! audiorate ! vorbisenc ! queue max-size-buffers=0 max-size-time=0 ! mux. mux. ! queue max-size-buffers=0 max-size-time=0 ! shout2send ip=@URL port=@PORT password=@PASSWORD mount=@MOUNT streamname=WSIceCastHQ sync=false
# VP8enc
iceCast=gst-launch-1.0 -q tcpclientsrc port=@VPORT ! videoparse format=rgb width=@CWIDTH height=@CHEIGHT framerate=@RATE/1 ! queue max-size-buffers=0 max-size-time=0 ! videoconvert ! videoscale ! videorate ! video/x-raw, format=RGB, framerate=@RATE/1, width=@CWIDTH, height=@CHEIGHT ! videoconvert ! vp8enc end-usage=vbr target-bitrate=@VBITRATE000 deadline=1 keyframe-max-dist=@KEYINT threads=4 cpu-used=11 ! queue max-size-buffers=0 max-size-time=0 ! webmmux streamable=true name=mux  tcpclientsrc port=@APORT ! audio/x-raw, format=S16BE, channels=@CHANNELS, rate=@FREQ ! queue max-size-buffers=0 max-size-time=0 ! audioconvert ! audioresample ! audiorate ! vorbisenc max-bitrate=@ABITRATE000 ! queue max-size-buffers=0 max-size-time=0 ! mux. mux. ! queue max-size-buffers=0 max-size-time=0 ! shout2send ip=@URL port=@PORT mount=@MOUNT password=@PASSWORD streamname=WSIceCast sync=false
iceCastHQ=gst-launch-1.0 -q tcpclientsrc port=@VPORT ! videoparse format=rgb width=@CWIDTH height=@CHEIGHT framerate=@RATE/1 ! queue max-size-buffers=0 max-size-time=0 ! videoconvert ! videoscale ! videorate ! video/x-raw, format=RGB, framerate=@RATE/1, width=@CWIDTH, height=@CHEIGHT ! videoconvert ! vp8enc end-usage=vbr target-bitrate=@VBITRATE000 deadline=1 sharpness=3 keyframe-max-dist=@KEYINT threads=4 cpu-used=2 ! queue max-size-buffers=0 max-size-time=0 ! oggmux name=mux tcpclientsrc port=@APORT ! audio/x-raw, format=S16BE, channels=@CHANNELS, rate=@FREQ ! queue max-size-buffers=0 max-size-time=0 ! audioconvert ! audioresample ! audiorate ! vorbisenc quality=0.8 max-bitrate=@ABITRATE000 ! queue max-size-buffers=0 max-size-time=0 ! mux. mux. ! queue max-size-buffers=0 max-size-time=0 ! shout2send ip=@URL port=@PORT password=@PASSWORD mount=@MOUNT streamname=WSIceCastHQ sync=false

#GStreamer 1.0 back-end
spkAudioOut=gst-launch-1.0 -q tcpclientsrc port=@APORT ! audio/x-raw, format=S16BE, channels=@CHANNELS, rate=@FREQ ! audioconvert ! audioresample ! alsasink
broadcast=gst-launch-1.0 -q tcpclientsrc port=@VPORT ! videoparse format=15 width=@CWIDTH height=@CHEIGHT framerate=@RATE/1 ! queue max-size-buffers=0 max-size-time=0 ! videorate ! videoscale ! videoconvert ! video/x-raw, format=I420, framerate=@RATE/1, width=@CWIDTH, height=@CHEIGHT ! videoconvert ! x264enc pass=cbr threads=0 bitrate=@VBITRATE key-int-max=@KEYINT speed-preset=2 tune=zerolatency ! flvmux streamable=true name=mux tcpclientsrc port=@APORT ! audioparse raw-format=5 rate=@FREQ channels=@CHANNELS ! queue max-size-buffers=0 max-size-time=0 ! audioconvert ! audioresample ! audiorate ! lamemp3enc bitrate=@ABITRATE ! mpegaudioparse ! mux. mux. ! queue max-size-buffers=0 max-size-time=0 ! rtmpsink location=@URL sync=false
broadcastHQ=gst-launch-1.0 -q tcpclientsrc port=@VPORT ! videoparse format=15 width=@CWIDTH height=@CHEIGHT framerate=@RATE/1 ! queue max-size-buffers=0 max-size-time=0 ! videorate ! videoscale ! videoconvert ! video/x-raw, format=I420, framerate=@RATE/1, width=@CWIDTH, height=@CHEIGHT ! videoconvert ! x264enc pass=cbr threads=0 bitrate=@VBITRATE key-int-max=@KEYINT speed-preset=7 tune=zerolatency ! flvmux streamable=true name=mux tcpclientsrc port=@APORT ! audioparse raw-format=5 rate=@FREQ channels=@CHANNELS ! queue max-size-buffers=0 max-size-time=0 ! audioconvert ! audioresample ! audiorate ! lamemp3enc bitrate=@ABITRATE ! mpegaudioparse ! mux. mux. ! queue max-size-buffers=0 max-size-time=0 ! rtmpsink location=@URL sync=false
#iceCast=gst-launch-1.0 tcpclientsrc port=@VPORT ! videoparse format=rgb width=@CWIDTH height=@CHEIGHT framerate=@RATE/1 ! queue max-size-buffers=0 max-size-time=0 ! videoconvert ! videoscale ! videorate ! video/x-raw, format=RGB, framerate=@RATE/1, width=@CWIDTH, height=@CHEIGHT ! videoconvert ! theoraenc quality=30 ! queue max-size-buffers=0 max-size-time=0 ! oggmux name=mux  tcpclientsrc port=@APORT ! audio/x-raw, format=S16BE, channels=@CHANNELS, rate=@FREQ ! queue max-size-buffers=0 max-size-time=0 ! audioconvert ! audioresample ! audiorate ! vorbisenc ! queue max-size-buffers=0 max-size-time=0 ! mux. mux. ! queue max-size-buffers=0 max-size-time=0 ! shout2send ip=@URL port=@PORT mount=@MOUNT password=@PASSWORD streamname=WSIceCast sync=false
#iceCastHQ=gst-launch-1.0 tcpclientsrc port=@VPORT ! videoparse format=rgb width=@CWIDTH height=@CHEIGHT framerate=@RATE/1 ! queue max-size-buffers=0 max-size-time=0 ! videoconvert ! videoscale ! videorate ! video/x-raw, format=RGB, framerate=@RATE/1, width=@CWIDTH, height=@CHEIGHT ! videoconvert ! theoraenc ! queue max-size-buffers=0 max-size-time=0 ! oggmux name=mux tcpclientsrc port=@APORT ! audio/x-raw, format=S16BE, channels=@CHANNELS, rate=@FREQ ! queue max-size-buffers=0 max-size-time=0 ! audioconvert ! audioresample ! audiorate ! vorbisenc ! queue max-size-buffers=0 max-size-time=0 ! mux. mux. ! queue max-size-buffers=0 max-size-time=0 ! shout2send ip=@URL port=@PORT password=@PASSWORD mount=@MOUNT streamname=WSIceCastHQ sync=false
file=gst-launch-1.0 -q tcpclientsrc port=@VPORT ! videoparse format=15 width=@CWIDTH height=@CHEIGHT framerate=@RATE/1 ! queue max-size-buffers=0 max-size-time=0 ! videorate ! videoscale ! videoconvert ! video/x-raw, format=I420, framerate=@RATE/1, width=@CWIDTH, height=@CHEIGHT ! videoconvert ! x264enc pass=cbr threads=0 bitrate=@VBITRATE key-int-max=@KEYINT speed-preset=2 tune=zerolatency ! flvmux streamable=true name=mux tcpclientsrc port=@APORT ! audioparse raw-format=5 rate=@FREQ channels=@CHANNELS ! queue max-size-buffers=0 max-size-time=0 ! audioconvert ! audioresample ! audiorate ! lamemp3enc bitrate=@ABITRATE ! mpegaudioparse ! mux. mux. ! queue max-size-buffers=0 max-size-time=0 ! filesink location=@FILE
udp=gst-launch-1.0 -q tcpclientsrc port=@VPORT ! videoparse format=15 width=@CWIDTH height=@CHEIGHT framerate=@RATE/1 ! queue max-size-buffers=0 max-size-time=0 ! videorate ! videoscale ! videoconvert ! video/x-raw, format=I420, framerate=@RATE/1, width=@CWIDTH, height=@CHEIGHT ! videoconvert ! x264enc pass=cbr threads=0 bitrate=@VBITRATE key-int-max=@KEYINT speed-preset=2 tune=zerolatency ! mpegtsmux alignment=7 name=mux tcpclientsrc port=@APORT ! audioparse raw-format=5 rate=@FREQ channels=@CHANNELS ! queue max-size-buffers=0 max-size-time=0 ! audioconvert ! audioresample ! audiorate ! lamemp3enc bitrate=@ABITRATE ! mpegaudioparse ! mux. mux. ! rndbuffersize max=1316 min=1316 ! queue max-size-buffers=0 max-size-time=0 ! udpsink host=127.0.0.1 port=7000 sync=false
udpHQ=gst-launch-1.0 -q tcpclientsrc port=@VPORT ! videoparse format=15 width=@CWIDTH height=@CHEIGHT framerate=@RATE/1 ! queue max-size-buffers=0 max-size-time=0 ! videorate ! videoscale ! videoconvert ! video/x-raw, format=I420, framerate=@RATE/1, width=@CWIDTH, height=@CHEIGHT ! videoconvert ! x264enc pass=cbr threads=0 bitrate=@VBITRATE key-int-max=@KEYINT speed-preset=7 tune=zerolatency ! mpegtsmux alignment=7 name=mux tcpclientsrc port=@APORT ! audioparse raw-format=5 rate=@FREQ channels=@CHANNELS ! queue max-size-buffers=0 max-size-time=0 ! audioconvert ! audioresample ! audiorate ! lamemp3enc bitrate=@ABITRATE ! mpegaudioparse ! mux. mux. ! rndbuffersize max=1316 min=1316 ! queue max-size-buffers=0 max-size-time=0 ! udpsink host=127.0.0.1 port=7000 sync=false
testStream = gst-launch-1.0 -q audiotestsrc ! audioconvert ! audio/x-raw, format=S16BE, channels=@CHANNELS, rate=@FREQ ! audioconvert ! tcpclientsink port=@APORT videotestsrc ! videoconvert ! videoscale ! videorate ! video/x-raw, format=RGB, framerate=@RATE/1, width=@CWIDTH, height=@CHEIGHT ! videoconvert ! tcpclientsink port=@VPORT

#Some tag translation
TAG_MP3=libmp3lame
TAG_VP6=flv
TAG_H_264=flv
#libx264 -vpre baseline